import{m as te,u as ne,r as F,g as D,n as W,q as R,s as J,e as o,o as c,f as h,w as t,h as e,v as j,i as n,j as d,t as N,x as I,F as A,y as P,z as H,c as Q,d as X,a as G,b as E,A as oe,k as L,B as ae,C as se,D as le,E as ie,T as re,G as ce}from"./index-08ec7c8f.js";import{_ as K}from"./_plugin-vue_export-helper-c27b6911.js";const q=te("adapter",()=>{const{platform:w,mobile:u,name:s,width:a,height:_}=ne(),m=F("compact"),i=D({density:"compact",btnSize:"small",btnMediumSize:"",btnLargeSize:"",textSize:"",textMediumSize:"",textLargeSize:""});W(m,(f,p)=>{f==="compact"&&(i.btnSize="small"),f==="comfortable"&&(i.btnSize=void 0),f==="default"&&(i.btnSize="large")});const g=R(()=>u.value),y=R(()=>s.value==="xs"),S=R(()=>window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone||document.referrer.includes("android-app://"));return{density:m,size:i,isMobile:g,isPhone:y,isInStandaloneMode:S,onLine:null}},{persist:{paths:["density","size"]}});const de={__name:"Menu",props:["route"],setup(w){const u=q(),s=w,a=F("mdi-chevron-down"),_=F(s.route.path);return J(()=>{!s.route.children||s.route.children.length===1?a.value="":_.value=""}),(m,i)=>{const g=o("v-btn"),y=o("v-icon"),S=o("v-list-item-title"),V=o("v-list-item"),f=o("v-list"),p=o("v-menu");return c(),h(p,{"open-on-hover":!n(u).isMobile,"open-on-click":n(u).isMobile},{activator:t(({props:r})=>[e(g,j({class:"d-none d-sm-flex"},r,{"append-icon":a.value,size:n(u).size.btnSize,router:"",to:_.value}),{default:t(()=>[d(N(w.route.meta.title),1)]),_:2},1040,["append-icon","size","to"])]),default:t(()=>[a.value?(c(),h(f,{key:0,lines:!1,density:"compact",nav:""},{default:t(()=>[(c(!0),I(A,null,P(w.route.children,r=>(c(),h(V,{key:r.path,router:"",to:r.path,color:"primary"},{append:t(()=>[e(y,{icon:r.meta.icon,size:"small"},null,8,["icon"])]),default:t(()=>[e(S,{textContent:N(r.meta.title)},null,8,["textContent"])]),_:2},1032,["to"]))),128))]),_:1})):H("",!0)]),_:1},8,["open-on-hover","open-on-click"])}}},ue=K(de,[["__scopeId","data-v-3d03714a"]]);function _e(){document.fullscreenElement?document.exitFullscreen():document.documentElement.requestFullscreen()}const pe={class:"text-overline font-weight-black"},me=L("span",{class:"font-weight-bold text-overline"},"Profile",-1),ve={__name:"NavBar",setup(w){const u=Q(),s=X(),a=G(),_=E(),m=q(),i=_.settings,g=D([]),y=D([{text:"Document",icon:"mdi-clock",route:"/document"},{text:"Offline",icon:"mdi-account",route:""},{text:"Setting",icon:"mdi-cog",route:""},{text:"Sing Out",icon:"mdi-export"}]),S=()=>{i.refresh=!i.refresh},V=()=>{i.theme=i.theme==="light"?"dark":"light"},f=()=>{a.$reset(),u.push({path:"/login",query:{redirect:s.path}})},p=(r,l)=>{console.log(r,l),console.log("click",l.text),l.text==="Sing Out"&&f()};return J(()=>{a.privilege.routes.filter(r=>r.meta.location==="nav").map(r=>{r.path==="/"&&r.children?g.push(r.children[0]):g.push(r)}),a.privilege.routes.filter(r=>r.path==="/").map(r=>{r.children&&g.push(...r.children.filter(l=>l.path!=="/home"))})}),(r,l)=>{const k=o("v-app-bar-nav-icon"),z=o("v-toolbar-title"),U=o("v-spacer"),O=o("v-divider"),b=o("v-btn"),C=o("v-icon"),$=o("v-list-item-title"),T=o("v-list-item"),x=o("v-list"),v=o("v-menu"),M=o("v-app-bar");return c(),h(M,{density:n(m).density,flat:n(i).navBarFlat,"scroll-behavior":n(i).navBarBehavior.join(" "),"scroll-threshold":"1",order:"0"},{default:t(()=>[e(k,{onClick:l[0]||(l[0]=B=>n(i).showSideBar=!n(i).showSideBar)}),oe(e(z,null,{default:t(()=>[L("span",pe,N(n(ae).title),1)]),_:1},512),[[se,!(n(i).sideBarOrder===0&&n(i).showSideBar&&!n(i).sideBarOverlay)]]),e(U),(c(!0),I(A,null,P(g,B=>(c(),I(A,{key:B.path},[B.meta.hidden?H("",!0):(c(),h(ue,{key:0,route:B},null,8,["route"]))],64))),128)),e(O,{class:"d-none d-sm-flex pl-2",inset:"",vertical:""}),e(b,{size:"small",icon:"mdi-refresh",onClick:S}),e(b,{class:"d-none d-sm-flex",size:"small",icon:"mdi-fullscreen",onClick:n(_e)},null,8,["onClick"]),e(b,{class:"d-none d-sm-flex",size:"small",icon:n(_).switchIcon,onClick:V},null,8,["icon"]),e(b,{class:"d-none d-sm-flex",size:"small",icon:"mdi-cog",onClick:l[1]||(l[1]=B=>n(i).showNavBarSetting=!0)}),e(v,{"open-on-hover":!n(m).isMobile,"open-on-click":n(m).isMobile},{activator:t(({props:B})=>[n(m).isPhone?(c(),h(b,j({key:1,size:"small"},B,{icon:"mdi-dots-vertical"}),null,16)):(c(),h(b,j({key:0,class:"d-none d-sm-flex",color:"primary"},B,{"prepend-icon":"mdi-account-circle"}),{default:t(()=>[me]),_:2},1040))]),default:t(()=>[e(x,{lines:!1,density:"compact",nav:"",width:"200"},{default:t(()=>[(c(!0),I(A,null,P(y,(B,Z)=>(c(),h(T,{key:Z,value:B,router:"",to:B.route,onClick:ee=>p(ee,B),color:"primary"},{prepend:t(()=>[e(C,{icon:B.icon,size:"small"},null,8,["icon"])]),default:t(()=>[e($,null,{default:t(()=>[d(N(B.text),1)]),_:2},1024)]),_:2},1032,["value","to","onClick"]))),128))]),_:1})]),_:1},8,["open-on-hover","open-on-click"])]),_:1},8,["density","flat","scroll-behavior"])}}},fe=L("p",{class:"text-subtitle-2"},"General 常规",-1),he=L("p",{class:"text-caption text-disabled"}," 自定义你的侧边栏和导航栏 ",-1),ge=L("span",{class:"text-subtitle-2 text-medium-emphasis"},"显示大小",-1),xe={class:"text-caption text-medium-emphasis text-uppercase"},Y={__name:"Setting",setup(w){const u=E(),s=q(),a=u.settings,_=()=>{const f=D({0:"Small",1:"Medium",2:"Large"}),p={compact:0,comfortable:1,default:2},r=k=>{for(let z in p)if(p[z]===k){s.density=z;break}},l=R(()=>p[s.density]);return{tickLabels:f,tickValue:l,move:r}},{tickLabels:m,tickValue:i,move:g}=_(),y=()=>{const f=a.navBarBehavior.indexOf("hide")>=0?F(!1):F(!0);return W(f,(p,r)=>{p?a.navBarBehavior.splice(a.navBarBehavior.indexOf("hide"),1):a.navBarBehavior.push("hide")}),{navBarHide:f}},{navBarHide:S}=y(),V=()=>{a.showNavBarSetting=!1,a.showSideBarSetting=!1};return(f,p)=>{const r=o("v-btn"),l=o("v-list-item"),k=o("v-list"),z=o("v-divider"),U=o("v-list-subheader"),O=o("v-switch"),b=o("v-list-item-action"),C=o("v-list-item-title"),$=o("v-list-item-subtitle"),T=o("v-slider"),x=o("v-checkbox-btn");return c(),I("div",null,[e(k,null,{default:t(()=>[e(l,{class:"text-overline",title:"Settings",subtitle:"设置"},{append:t(()=>[e(r,{icon:"mdi-close",size:"small",onClick:V})]),_:1})]),_:1}),e(z),e(k,{lines:"one",density:"compact"},{default:t(()=>[e(U,null,{default:t(()=>[fe,he]),_:1}),e(l,{value:"sideBarOrder"},{prepend:t(({isActive:v})=>[e(b,{start:""},{default:t(()=>[e(O,{modelValue:n(a).sideBarOrder,"onUpdate:modelValue":p[0]||(p[0]=M=>n(a).sideBarOrder=M),"true-value":0,"false-value":1,"hide-details":"",color:"primary"},null,8,["modelValue"])]),_:1})]),default:t(()=>[e(C,{class:"text-subtitle-2 text-medium-emphasis"},{default:t(()=>[d("侧边栏高度")]),_:1}),e($,{class:"text-caption"},{default:t(()=>[d("修改侧边栏高度为全屏高度")]),_:1})]),_:1}),e(l,{value:"sideBarOverlay"},{prepend:t(({isActive:v})=>[e(b,{start:""},{default:t(()=>[e(O,{modelValue:n(a).sideBarOverlay,"onUpdate:modelValue":p[1]||(p[1]=M=>n(a).sideBarOverlay=M),"hide-details":"",color:"primary"},null,8,["modelValue"])]),_:1})]),default:t(()=>[e(C,{class:"text-subtitle-2 text-medium-emphasis"},{default:t(()=>[d("临时弹出效果")]),_:1}),e($,{class:"text-caption"},{default:t(()=>[d(" 使用阴影效果临时弹出侧边栏 ")]),_:1})]),_:1}),e(l,{value:"sideBarExpand"},{prepend:t(({isActive:v})=>[e(b,{start:""},{default:t(()=>[e(O,{modelValue:n(a).sideBarExpand,"onUpdate:modelValue":p[2]||(p[2]=M=>n(a).sideBarExpand=M),"hide-details":"",color:"primary"},null,8,["modelValue"])]),_:1})]),default:t(()=>[e(C,{class:"text-subtitle-2 text-medium-emphasis"},{default:t(()=>[d("收缩效果")]),_:1}),e($,{class:"text-caption"},{default:t(()=>[d(" 侧边栏自动收缩窄型，只显示图标 ")]),_:1})]),_:1}),e(l,{value:"navBarHide"},{prepend:t(({isActive:v})=>[e(b,{start:""},{default:t(()=>[e(O,{modelValue:n(S),"onUpdate:modelValue":p[3]||(p[3]=M=>le(S)?S.value=M:null),"hide-details":"",color:"primary"},null,8,["modelValue"])]),_:1})]),default:t(()=>[e(C,{class:"text-subtitle-2 text-medium-emphasis"},{default:t(()=>[d("固定导航栏")]),_:1}),e($,{class:"text-caption"},{default:t(()=>[d(" 导航栏固定在最上方 ")]),_:1})]),_:1}),e(l,{value:"navBarFlat"},{prepend:t(({isActive:v})=>[e(b,{start:""},{default:t(()=>[e(O,{modelValue:n(a).navBarFlat,"onUpdate:modelValue":p[4]||(p[4]=M=>n(a).navBarFlat=M),"hide-details":"",color:"primary"},null,8,["modelValue"])]),_:1})]),default:t(()=>[e(C,{class:"text-subtitle-2 text-medium-emphasis"},{default:t(()=>[d("导航栏完全扁平化")]),_:1}),e($,{class:"text-caption"},{default:t(()=>[d(" 启用导航栏扁平化效果，且没有下边框 ")]),_:1})]),_:1})]),_:1}),e(z),e(k,{lines:"three","select-strategy":"classic"},{default:t(()=>[e(U,null,{default:t(()=>[d("User Controls / 用户设置")]),_:1}),e(l,{value:"silder"},{default:t(()=>[e(T,{ticks:n(m),max:2,step:"1","show-ticks":"always","tick-size":"4","track-size":"4",color:"primary","model-value":n(i),"onUpdate:modelValue":n(g)},{label:t(()=>[ge]),"tick-label":t(v=>[L("span",xe,N(v.tick.label),1)]),_:1},8,["ticks","model-value","onUpdate:modelValue"])]),_:1})]),_:1}),e(z),e(k,{lines:"one",density:"compact","select-strategy":"classic"},{default:t(()=>[e(U,null,{default:t(()=>[d("Others / 其他设置")]),_:1}),e(l,{value:"notifications"},{prepend:t(({isActive:v})=>[e(b,{start:""},{default:t(()=>[e(x,{"model-value":v},null,8,["model-value"])]),_:2},1024)]),default:t(()=>[e(C,null,{default:t(()=>[d("Notifications")]),_:1}),e($,null,{default:t(()=>[d(" Notify me about updates to apps or games that I downloaded ")]),_:1})]),_:1}),e(l,{value:"sound"},{prepend:t(({isActive:v})=>[e(b,{start:""},{default:t(()=>[e(O,{"hide-details":"",color:"primary"})]),_:1})]),default:t(()=>[e(C,null,{default:t(()=>[d("Sound")]),_:1}),e($,null,{default:t(()=>[d(" Auto-update apps at any time. Data charges may apply ")]),_:1})]),_:1}),(c(),I(A,null,P(5,v=>e(l,{value:"widget",key:v},{prepend:t(({isActive:M})=>[e(b,{start:""},{default:t(()=>[e(O,{"hide-details":"",color:"primary"})]),_:1})]),default:t(()=>[e(C,null,{default:t(()=>[d("Widget")]),_:1}),e($,null,{default:t(()=>[d(" Auto-update apps at any time. Data charges may apply ")]),_:1})]),_:2},1032,["value"])),64))]),_:1})])}}},be={__name:"SideBar",setup(w){const s=E().settings,a=G(),_=a.userinfo,m=Q(),i=X(),g=()=>{const V=D([]);a.privilege.routes.filter(l=>l.meta.location==="side").map(l=>{l.path==="/"&&l.children?V.push(l.children[0]):V.push(l)});const r=D([{text:"Settings",icon:"mdi-cog",handle:()=>{s.showSideBarSetting=!0}},{text:"Sign Out",icon:"mdi-export",handle:()=>{a.$reset(),m.push({path:"/login",query:{redirect:i.path}})}}]);return{sideBarItems:V,bottomItems:r}},{sideBarItems:y,bottomItems:S}=g();return(V,f)=>{const p=o("v-btn"),r=o("v-list-item-title"),l=o("v-list-item-subtitle"),k=o("v-list-item"),z=o("v-list"),U=o("v-divider"),O=o("v-list-group"),b=o("v-icon"),C=o("v-card"),$=o("v-bottom-sheet"),T=o("v-navigation-drawer");return c(),h(T,{modelValue:n(s).showSideBar,"onUpdate:modelValue":f[1]||(f[1]=x=>n(s).showSideBar=x),temporary:n(s).sideBarOverlay,rail:n(s).sideBarExpand,order:n(s).sideBarOrder,"expand-on-hover":"",color:"grey-darken-3"},{append:t(()=>[e(U,{class:"d-flex d-sm-none"}),e(z,{lines:!1,density:"compact",nav:""},{default:t(()=>[(c(!0),I(A,null,P(n(S),(x,v)=>(c(),h(k,{class:"d-flex d-sm-none",color:"primary",key:v,value:x,onClick:x.handle,active:!1},{prepend:t(()=>[e(b,{icon:x.icon},null,8,["icon"])]),default:t(()=>[e(r,{textContent:N(x.text)},null,8,["textContent"])]),_:2},1032,["value","onClick"]))),128))]),_:1}),e($,{modelValue:n(s).showSideBarSetting,"onUpdate:modelValue":f[0]||(f[0]=x=>n(s).showSideBarSetting=x),fullscreen:""},{default:t(()=>[e(C,null,{default:t(()=>[e(Y)]),_:1})]),_:1},8,["modelValue"])]),default:t(()=>[n(s).sideBarOrder===0?(c(),h(z,{key:0},{default:t(()=>[e(k,{"prepend-avatar":n(_).avatar_url},{append:t(()=>[e(p,{size:"small",variant:"text",icon:"mdi-menu-down"})]),default:t(()=>[e(r,{class:"text-overline font-weight-black"},{default:t(()=>[d(N(n(_).username),1)]),_:1}),e(l,{class:"text-caption"},{default:t(()=>[d(N(n(_).location||n(_).html_url),1)]),_:1})]),_:1},8,["prepend-avatar"])]),_:1})):H("",!0),e(U),e(z,{lines:!1,density:"compact",nav:""},{default:t(()=>[e(k,{"prepend-icon":"mdi-home",title:"Home",route:"",to:"/"}),(c(!0),I(A,null,P(n(y),x=>(c(),h(O,{key:x.path,value:x.name},{activator:t(({props:v})=>[e(k,j(v,{title:x.meta.title,"prepend-icon":x.meta.icon}),null,16,["title","prepend-icon"])]),default:t(()=>[(c(!0),I(A,null,P(x.children,v=>(c(),h(k,{key:v.path,value:v.meta.title,title:v.meta.title,color:"primary",router:"",to:v.path},null,8,["value","title","to"]))),128))]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue","temporary","rail","order"])}}};const ye={__name:"InstallBanner",setup(w){const u=q(),s=E(),a=()=>{"deferredPrompt"in window&&(window.deferredPrompt.prompt(),window.deferredPrompt.userChoice.then(m=>{m.outcome==="accepted"?console.log("install succeed"):console.log("cancel install"),delete window.deferredPrompt,console.log("delete window.deferredPrompt")}))},_=()=>{s.installBanner=!1};return(m,i)=>{const g=o("v-banner-text"),y=o("v-spacer"),S=o("v-btn"),V=o("v-banner-actions"),f=o("v-banner");return n(u).isInStandaloneMode?H("",!0):(c(),h(f,{key:0,sticky:"",stacked:"",lines:"one",icon:"mdi-alert-circle",density:"comfortable"},{default:t(()=>[e(g,{class:"text-medium-emphasis"},{default:t(()=>[d(" 请安装应用，添加应用到桌面 ")]),_:1}),e(y),e(V,null,{default:t(()=>[e(S,{onClick:a,class:"font-weight-bold",color:"indigo-darken-3",size:"small",variant:"flat"},{default:t(()=>[d(" Install ")]),_:1}),e(S,{onClick:_,class:"ml-2",icon:"mdi-close",variant:"text",size:"x-small"})]),_:1})]),_:1}))}}},Se=K(ye,[["__scopeId","data-v-ccadb142"]]),ke={__name:"BottomBar",setup(w){const u=G();q();const s=D([]);return J(()=>{u.privilege.routes.filter(a=>a.path==="/").map(a=>{a.children&&s.push(...a.children)})}),(a,_)=>{const m=o("v-icon"),i=o("v-btn"),g=o("v-bottom-navigation");return c(),h(g,{grow:"",class:"d-flex d-sm-none",density:"comfortable",color:"primary",order:"3"},{default:t(()=>[(c(!0),I(A,null,P(s,y=>(c(),h(i,{key:y.path,value:y.name,class:"text-caption",router:"",to:y.path},{default:t(()=>[e(m,null,{default:t(()=>[d(N(y.meta.icon),1)]),_:2},1024)]),_:2},1032,["value","to"]))),128))]),_:1})}}};const Be={__name:"Main",setup(w){const u=E();let s=F(!0);return W(()=>u.settings.refresh,()=>{s.value=!1,ie(()=>{s.value=!0})}),(a,_)=>{const m=o("router-view");return c(),h(m,null,{default:t(({Component:i})=>[e(re,{name:"fade"},{default:t(()=>[n(s)?(c(),h(ce(i),{key:0})):H("",!0)]),_:2},1024)]),_:1})}}},we=K(Be,[["__scopeId","data-v-26449c79"]]),Ve={class:"text-subtitle-1 font-weight-bold pb-2"},ze=L("p",null,"This is a longer paragraph explaining something",-1),Ce=L("p",null,"欢迎回来",-1),$e={__name:"Notification",setup(w){const u=E(),s=G();return(a,_)=>{const m=o("v-btn"),i=o("v-snackbar");return c(),h(i,{modelValue:n(u).settings.showLayoutMsg,"onUpdate:modelValue":_[1]||(_[1]=g=>n(u).settings.showLayoutMsg=g),timeout:"3000",location:"top right",vertical:""},{actions:t(()=>[e(m,{density:"compact",icon:"mdi-close",color:"primary",onClick:_[0]||(_[0]=g=>n(u).settings.showLayoutMsg=!1)})]),default:t(()=>[L("div",Ve,"Hi "+N(n(s).userinfo.username),1),ze,Ce]),_:1},8,["modelValue"])}}},Ie={__name:"index",setup(w){const u=E();return(s,a)=>{const _=o("v-navigation-drawer"),m=o("v-main");return c(),I(A,null,[e($e),e(be),e(ve),e(_,{modelValue:n(u).settings.showNavBarSetting,"onUpdate:modelValue":a[0]||(a[0]=i=>n(u).settings.showNavBarSetting=i),temporary:"",location:"right",width:"360",order:"-2"},{default:t(()=>[e(Y)]),_:1},8,["modelValue"]),e(m,null,{default:t(()=>[n(u).installBanner?(c(),h(Se,{key:0})):H("",!0),e(we)]),_:1}),e(ke)],64)}}};export{Ie as default};
